<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œ22íšŒ ì„œìš¸êµ­ì œí™˜ê²½ì˜í™”ì œ | SIEFF ë¬¼ì§ˆíë¦„ë¶„ì„</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Plotly.js for the chart -->
    <script src="https://cdn.plot.ly/plotly-2.32.0.min.js" charset="utf-8"></script>
    <!-- Google Fonts for better typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
        }



        /* Responsive container for the chart */
        .sankey-container {
            width: 100%;
            height: auto;
            min-height: 1400px;
        }

        @media (min-width: 1024px) {
            .sankey-container {
                height: 180vh;
                min-height: 1600px;
            }
        }
    </style>
</head>

<body class="text-gray-800 bg-slate-50">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-emerald-700">SIEFF 2025 Impact Hub</a>
            <div class="hidden md:flex space-x-6">
                <a href="sieff-impact.html" class="text-gray-600 hover:text-emerald-600">SIEFF ì„íŒ©íŠ¸</a>
                <a href="impact-report.html" class="text-gray-600 hover:text-emerald-600">ì„íŒ©íŠ¸ ë¦¬í¬íŠ¸</a>
                <a href="mfa-report.html" class="text-emerald-600 font-bold">ë¬¼ì§ˆíë¦„ë¶„ì„</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="text-center mb-24">
        <div class="text-5xl md:text-6xl font-extrabold text-emerald-900 mb-6">ì œ22íšŒ ì„œìš¸êµ­ì œí™˜ê²½ì˜í™”ì œ</div>
        <h1 class="text-4xl md:text-5xl font-bold text-emerald-800 mb-4">ë¬¼ì§ˆíë¦„ë¶„ì„(MFA) ë¦¬í¬íŠ¸</h1>
        <p class="text-lg text-gray-600 max-w-3xl mx-auto">
            ì˜í™”ì œ ìš´ì˜ì— íˆ¬ì…ëœ ìì›ë¶€í„° í™˜ê²½ì  ì˜í–¥ê¹Œì§€, ì „ì²´ ë¬¼ì§ˆ íë¦„ì„ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.
        </p>
    </section>

    <div class="container mx-auto px-6 py-16">
        <!-- Added Section: Key Metrics Infographic -->
        <section class="mb-16">
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 text-center">
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <p class="text-4xl font-bold text-emerald-600">195.16<span class="text-xl ml-1">í†¤</span></p>
                    <p class="text-sm text-gray-500 mt-2">ì´ COâ‚‚ ë°°ì¶œëŸ‰</p>
                </div>
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <p class="text-4xl font-bold text-emerald-600">57,491<span class="text-xl ml-1">ëª…</span></p>
                    <p class="text-sm text-gray-500 mt-2">êµ­ë‚´ ì°¸ê°€ì ìˆ˜</p>
                </div>
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <p class="text-4xl font-bold text-emerald-600">9<span class="text-xl ml-1">ëª…</span></p>
                    <p class="text-sm text-gray-500 mt-2">í•´ì™¸ ê²ŒìŠ¤íŠ¸ ìˆ˜</p>
                </div>
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <p class="text-4xl font-bold text-emerald-600">265<span class="text-xl ml-1">ëª…</span></p>
                    <p class="text-sm text-gray-500 mt-2">ê·¸ë¦°í’‹ ìë°œ ì°¸ì—¬ì</p>
                </div>
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <p class="text-4xl font-bold text-emerald-600">307<span class="text-xl ml-1">ê±´</span></p>
                    <p class="text-sm text-gray-500 mt-2">ì‹¤ì œ ì´ë™ ê¸°ë¡ ê±´ìˆ˜</p>
                </div>
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <p class="text-4xl font-bold text-emerald-600">300<span class="text-xl ml-1">+</span></p>
                    <p class="text-sm text-gray-500 mt-2">ë Œíƒˆ ë¬¼í’ˆ ì´ ê°œìˆ˜</p>
                </div>
            </div>
        </section>

        <main>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                ì˜í™”ì œ ìš´ì˜ì— íˆ¬ì…ëœ ìì›(Inbound)ì„ ì„¸ë¶„í™”í•˜ê³ , ê° ìì›ì´ ì–´ë–¤ í–‰ì‚¬(Process)ë¥¼ ê±°ì³ í™˜ê²½ì  ì˜í–¥(Outbound)ìœ¼ë¡œ ì´ì–´ì§€ëŠ”ì§€ ê·¸ íë¦„ì„ í•œëˆˆì— ì‚´í´ë³´ì„¸ìš”. ì°¨íŠ¸ì—
                ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìƒì„¸ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <div class="bg-white rounded-2xl shadow-lg p-4 md:p-6">
                <div id="sankey-chart" class="sankey-container"></div>
            </div>

            <section class="mt-12">
                <h3 class="text-3xl font-bold text-center text-gray-800 mb-8">ì£¼ìš” ë¶„ì„ ê²°ê³¼ (Key Insights)</h3>
                <div id="insights" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Insights will be dynamically generated by script -->
                </div>
            </section>

            <!-- Added Section: GreenFoot Citizen Participation -->
            <section class="mt-16">
                <h3 class="text-3xl font-bold text-center text-emerald-800 mb-4">ê·¸ë¦°í’‹(GreenFoot) ì‹œë¯¼ì°¸ì—¬ í˜ì‹ </h3>
                <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                    íƒ„ì†Œë°œìêµ­ ê³„ì‚°ê¸° 'ê·¸ë¦°í’‹'ì„ í†µí•´ ì˜í™”ì œ ì°¸ê°€ìë“¤ì´ ì§ì ‘ ìì‹ ì˜ ì´ë™ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  íƒ„ì†Œë°œìêµ­ ìƒì‡„ì— ìë°œì ìœ¼ë¡œ ë™ì˜í•œ ì†Œì¤‘í•œ ì‹œë¯¼ì°¸ì—¬ ê¸°ë¡ì…ë‹ˆë‹¤.
                </p>
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-6 text-center mb-10 border-b pb-10">
                        <div>
                            <p class="text-5xl font-bold text-emerald-600">265<span class="text-2xl">ëª…</span></p>
                            <p class="text-sm text-gray-500 mt-2">ìë°œì  ì°¸ì—¬ì</p>
                        </div>
                        <div>
                            <p class="text-5xl font-bold text-emerald-600">1,950<span class="text-2xl">kg</span></p>
                            <p class="text-sm text-gray-500 mt-2">ì´ ê¸°ë¡ëœ ë°°ì¶œëŸ‰</p>
                        </div>
                        <div>
                            <p class="text-5xl font-bold text-emerald-600">7.36<span class="text-2xl">kg</span></p>
                            <p class="text-sm text-gray-500 mt-2">1ì¸ë‹¹ í‰ê·  ë°°ì¶œëŸ‰</p>
                        </div>
                        <div>
                            <p class="text-5xl font-bold text-emerald-600">68.2<span class="text-2xl">%</span></p>
                            <p class="text-sm text-gray-500 mt-2">ìê°€ìš© ë°°ì¶œ ê¸°ì—¬ë„</p>
                        </div>
                        <div>
                            <p class="text-5xl font-bold text-emerald-600">0<span class="text-2xl">kg</span></p>
                            <p class="text-sm text-gray-500 mt-2">ìì „ê±° ì™„ì „ë¬´ë°°ì¶œ</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-8">
                        <div>
                            <h4 class="font-bold text-xl mb-3 text-emerald-700">ì‹¤ì œ ì°¸ì—¬ì ì´ë™íŒ¨í„´</h4>
                            <ul class="space-y-2 text-gray-600">
                                <li class="flex justify-between"><span>ëŒ€ì¤‘êµí†µ:</span> <strong>207ê±´ (67.4%)</strong></li>
                                <li class="flex justify-between"><span>ìê°€ìš©:</span> <strong>83ê±´ (27.0%)</strong></li>
                                <li class="flex justify-between"><span>ìì „ê±°:</span> <strong>14ê±´ (4.6%)</strong></li>
                                <li class="flex justify-between"><span>ì¹œí™˜ê²½ì°¨:</span> <strong>3ê±´ (1.0%)</strong></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-xl mb-3 text-emerald-700">ì§€ì—­ë³„ ì°¸ì—¬í˜„í™©</h4>
                            <ul class="space-y-2 text-gray-600">
                                <li class="flex justify-between"><span>ì„œìš¸:</span> <strong>185ê±´ (60.6%)</strong></li>
                                <li class="flex justify-between"><span>ê²½ê¸°:</span> <strong>84ê±´ (27.4%)</strong></li>
                                <li class="flex justify-between"><span>ì¸ì²œ:</span> <strong>28ê±´ (9.1%)</strong></li>
                                <li class="flex justify-between"><span>ì¶©ì²­:</span> <strong>5ê±´ (1.6%)</strong></li>
                                <li class="flex justify-between"><span>ê¸°íƒ€:</span> <strong>4ê±´ (1.3%)</strong></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-xl mb-3 text-emerald-700">êµí†µìˆ˜ë‹¨ë³„ íƒ„ì†Œíš¨ìœ¨ì„±</h4>
                            <ul class="space-y-2 text-gray-600">
                                <li class="flex justify-between"><span>ìê°€ìš©:</span> <strong>13.31 kgCOâ‚‚/íšŒ</strong></li>
                                <li class="flex justify-between"><span>ì¹œí™˜ê²½ì°¨:</span> <strong>4.27 kgCOâ‚‚/íšŒ</strong></li>
                                <li class="flex justify-between"><span>ëŒ€ì¤‘êµí†µ:</span> <strong>4.02 kgCOâ‚‚/íšŒ</strong></li>
                                <li class="flex justify-between"><span>ìì „ê±°:</span> <strong>0.0 kgCOâ‚‚/íšŒ</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Added Section: MFA Summary Table -->
            <section class="mt-16">
                <h3 class="text-3xl font-bold text-center text-gray-800 mb-8">ë¬¼ì§ˆíë¦„ë¶„ì„ ì£¼ìš” ê²°ê³¼ ìš”ì•½</h3>
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="p-4 font-bold text-slate-700">ë¶€ë¬¸ (ë¹„ì¤‘)</th>
                                <th class="p-4 font-bold text-slate-700">ì´ ë°°ì¶œëŸ‰ (tCOâ‚‚)</th>
                                <th class="p-4 font-bold text-slate-700">ì£¼ìš” ë°°ì¶œì› ë° ê°ì¶• ë…¸ë ¥</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="p-4 align-top">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">ğŸš—</span>
                                        <div>
                                            <p class="font-bold text-lg">êµí†µë¶€ë¬¸</p>
                                            <p class="text-gray-500">(93.3%)</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-4 font-mono text-lg align-top">181.92</td>
                                <td class="p-4 text-gray-600 align-top">
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>êµ­ë‚´ ì°¸ê°€ì ì´ë™</li>
                                        <li>í•´ì™¸ ê²ŒìŠ¤íŠ¸ í•­ê³µ/ìˆ™ë°•</li>
                                        <li>ë¬¼ë¥˜ ìš´ì†¡</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-4 align-top">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">âš¡ï¸</span>
                                        <div>
                                            <p class="font-bold text-lg">ì—ë„ˆì§€ë¶€ë¬¸</p>
                                            <p class="text-gray-500">(5.6%)</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-4 font-mono text-lg align-top">11.01</td>
                                <td class="p-4 text-gray-600 align-top">
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>ì˜¤í”„ë¼ì¸ ìƒì˜ê´€ ì „ë ¥</li>
                                        <li>ì˜¨ë¼ì¸ ì†¡ì¶œ ë°ì´í„°ì„¼í„°</li>
                                        <li>ì†¡ì¶œ ì‹œê°„ ì¦ê°€</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td class="p-4 align-top">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">ğŸ½ï¸</span>
                                        <div>
                                            <p class="font-bold text-lg">ìŒì‹ë¶€ë¬¸</p>
                                            <p class="text-gray-500">(1.1%)</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-4 font-mono text-lg align-top">2.22</td>
                                <td class="p-4 text-gray-600 align-top">
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>ì§€ì†ê°€ëŠ¥í•œ ì±„ì‹ ë©”ë‰´ í™•ëŒ€</li>
                                        <li>ì €íƒ„ì†Œ ì‹ë‹¨ ë„ì…</li>
                                        <li>ì¼€ì´í„°ë§ ìµœì†Œí™”</li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <footer class="bg-gray-800 text-white mt-24">
        <div class="container mx-auto px-6 py-8 text-center">
            <p class="font-bold text-lg">Korea Green Fund</p>
            <p class="mt-4 text-sm text-gray-400">Â© 2025 Seoul International Eco Film Festival. All Rights Reserved.ë³¸
                í˜ì´ì§€ëŠ” 2025ë…„ SIEFF ì§€ì†ê°€ëŠ¥ì„± ì„íŒ©íŠ¸ ë¦¬í¬íŠ¸ì˜ ë‚´ìš©ì„ ì‹œê°í™”í•œ ì¸í„°ë™í‹°ë¸Œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.</p>
        </div>
    </footer>

    <script>
        // --- Data Calculation from Provided Files ---
        // This section simulates reading the provided CSV data and calculating the values.

        // 1. Travel Data (Domestic)
        const domesticTravel = {
            opening_car: 2246.13,
            opening_transit: 577.9026 + 383.7456,
            main_event_car: 6101.19 + 1103.37,
            main_event_transit: 1569.7638 + 1042.3728 + 833.53 + 12.8,
            side_events_car: 2049.66 + 81326.19 + 56.63 + 1448.3 + 209.1,
            side_events_transit: (527.3532 + 350.1792) + (20924.2638 + 13894.3728) + (14.54 + 9.65) + (372.3 + 247.2) + (53.7 + 35.7)
        };
        const totalCar = domesticTravel.opening_car + domesticTravel.main_event_car + domesticTravel.side_events_car;
        const totalTransit = domesticTravel.opening_transit + domesticTravel.main_event_transit + domesticTravel.side_events_transit;

        // 2. Travel Data (International)
        const intlTravel = {
            flights: 36134,
            accommodation: 1044
        };
        const totalIntl = intlTravel.flights + intlTravel.accommodation;

        // 3. Logistics
        const totalLogistics = 92;

        // 4. Energy Data
        const energy = {
            offline_opening: 43.49,
            offline_main_event: 251.64,
            offline_side_events: 37.28 + 46.6 + 18.64 + 13.98 + 74.56 + 11.18 + 11.18 + 2.33 + 79.22,
            online_screening: 10550.48,
            online_school: 11.18,
            online_sbs: 11.18,
            online_btv: 2.33,
            online_youtube: 79.22
        };
        const totalOfflineEnergy = energy.offline_opening + energy.offline_main_event + energy.offline_side_events;
        const totalOnlineEnergy = energy.online_screening + energy.online_school + energy.online_sbs + energy.online_btv + energy.online_youtube;

        // 5. Food & Drink Data
        const food = {
            opening_general: 807.0,
            opening_low_carbon: 24.36 + 416.0,
            main_event_general: 952.26,
            main_event_low_carbon: 10.0,
            side_events_low_carbon: 8.12 + 4.8
        };
        const totalGeneralFood = food.opening_general + food.main_event_general;
        const totalLowCarbonFood = food.opening_low_carbon + food.main_event_low_carbon + food.side_events_low_carbon;

        // 6. Resources (Qualitative placeholder values)
        const resources = {
            opening: 250,
            main_event: 250,
            side_events: 500,
            total: 1000
        };

        // --- Calculate Process Totals ---
        const processTotals = {
            opening: (totalIntl / 2) + domesticTravel.opening_car + domesticTravel.opening_transit + energy.offline_opening + food.opening_general + food.opening_low_carbon,
            main_event: (totalIntl / 2) + domesticTravel.main_event_car + domesticTravel.main_event_transit + energy.offline_main_event + food.main_event_general + food.main_event_low_carbon,
            side_events: domesticTravel.side_events_car + domesticTravel.side_events_transit + totalLogistics + energy.offline_side_events + food.side_events_low_carbon,
            online: totalOnlineEnergy
        };

        // --- Calculate Outbound Details ---
        const outboundDetails = {
            transport: totalIntl + totalCar + totalTransit + totalLogistics,
            energy: totalOfflineEnergy + totalOnlineEnergy,
            food: totalGeneralFood + totalLowCarbonFood
        };
        const totalGHG = outboundDetails.transport + outboundDetails.energy + outboundDetails.food;

        // --- Sankey Diagram Configuration ---
        const data = {
            nodes: [
                // Level 0: Inbound Sources (0-12)
                { name: 'âœˆï¸ í•­ê³µ/ìˆ™ë°• (í•´ì™¸) (9ëª…)' },             // 0
                { name: `ğŸš— ìê°€ìš© (êµ­ë‚´) (24,063ëª…)` },          // 1
                { name: `ğŸšŒ ëŒ€ì¤‘êµí†µ (êµ­ë‚´) (33,635ëª…)` },      // 2
                { name: `ğŸšš ë¬¼ë¥˜/ì¥ë¹„ (14ê±´)` },                 // 3
                { name: 'ğŸ’¡ ì˜¤í”„ë¼ì¸ í–‰ì‚¬ (ì—ë„ˆì§€)' },         // 4
                { name: 'ğŸ½ï¸ ì¼ë°˜ ì‹ë‹¨ (ì¼€ì´í„°ë§ 150ì¸ë¶„)' },   // 5
                { name: 'ğŸ¥— ì±„ì‹/ì €íƒ„ì†Œ ì‹ë‹¨ (2,634ê°œ)' },       // 6
                { name: 'â™»ï¸ ìì›/ë¬¼í’ˆ' },                       // 7
                { name: 'ì˜¨ë¼ì¸ìƒì˜ê´€ (415,825ëª…)' },           // 8
                { name: 'í•™êµë‚´ êµìœ¡ (1,500ëª…)' },              // 9
                { name: 'SBS (1,000ëª…)' },                      // 10
                { name: 'Btv (1,000ëª…)' },                      // 11
                { name: 'ìœ íŠœë¸Œ (1,000ëª…)' },                   // 12

                // Level 1: Process (13-16)
                { name: 'ê°œë§‰ì‹' },                         // 13
                { name: 'ë³¸ í–‰ì‚¬ (ì˜¤í”„ë¼ì¸ ìƒì˜)' },         // 14
                { name: 'ë¶€ëŒ€í–‰ì‚¬ ë° ì§€ë°©ìƒì˜' },           // 15
                { name: 'ì˜¨ë¼ì¸ ìƒì˜' },                    // 16

                // Level 2: Outbound Main Categories (17-18)
                { name: `ğŸ”¥ ì˜¨ì‹¤ê°€ìŠ¤ ë°°ì¶œ (195,155 kgCOâ‚‚e)` }, // 17
                { name: 'ğŸ”„ ìì› ìˆœí™˜' },                     // 18

                // Level 3: Outbound Details (19-23)
                { name: `ì—¬í–‰/êµí†µ ë¶€ë¬¸ ë°°ì¶œ (181,921 kgCOâ‚‚e)` }, // 19
                { name: `ì—ë„ˆì§€ ë¶€ë¬¸ ë°°ì¶œ<br>(${outboundDetails.energy.toLocaleString('ko-KR', { maximumFractionDigits: 0 })} kgCOâ‚‚e)` }, // 20
                { name: `ì‹ìŒë£Œ ë¶€ë¬¸ ë°°ì¶œ<br>(${outboundDetails.food.toLocaleString('ko-KR', { maximumFractionDigits: 0 })} kgCOâ‚‚e)` }, // 21
                { name: 'ì¬ì‚¬ìš©/ë Œíƒˆ ë¬¼í’ˆ' },                 // 22
                { name: 'ì¬í™œìš© íê¸°ë¬¼' }                      // 23
            ],
            links: [
                // --- INBOUND TO PROCESS ---
                // Travel -> Events
                { source: 0, target: 13, value: totalIntl / 2, label: 'í•´ì™¸ ê²ŒìŠ¤íŠ¸ (ê°œë§‰ì‹)' },
                { source: 0, target: 14, value: totalIntl / 2, label: 'í•´ì™¸ ê²ŒìŠ¤íŠ¸ (ë³¸í–‰ì‚¬)' },
                { source: 1, target: 13, value: domesticTravel.opening_car, label: 'ê°œë§‰ì‹ ìê°€ìš©' },
                { source: 2, target: 13, value: domesticTravel.opening_transit, label: 'ê°œë§‰ì‹ ëŒ€ì¤‘êµí†µ' },
                { source: 1, target: 14, value: domesticTravel.main_event_car, label: 'ë³¸í–‰ì‚¬ ìê°€ìš©' },
                { source: 2, target: 14, value: domesticTravel.main_event_transit, label: 'ë³¸í–‰ì‚¬ ëŒ€ì¤‘êµí†µ' },
                { source: 1, target: 15, value: domesticTravel.side_events_car, label: 'ë¶€ëŒ€í–‰ì‚¬ ìê°€ìš©' },
                { source: 2, target: 15, value: domesticTravel.side_events_transit, label: 'ë¶€ëŒ€í–‰ì‚¬ ëŒ€ì¤‘êµí†µ' },
                { source: 3, target: 15, value: totalLogistics, label: 'ë¬¼ë¥˜' },

                // Energy (Offline) -> Events
                { source: 4, target: 13, value: energy.offline_opening, label: 'ê°œë§‰ì‹ ì—ë„ˆì§€' },
                { source: 4, target: 14, value: energy.offline_main_event, label: 'ë³¸í–‰ì‚¬ ì—ë„ˆì§€' },
                { source: 4, target: 15, value: energy.offline_side_events, label: 'ë¶€ëŒ€í–‰ì‚¬ ì—ë„ˆì§€' },

                // Energy (Online) -> Online Process
                { source: 8, target: 16, value: energy.online_screening, label: 'ì˜¨ë¼ì¸ìƒì˜ê´€ ì—ë„ˆì§€' },
                { source: 9, target: 16, value: energy.online_school, label: 'í•™êµêµìœ¡ ì—ë„ˆì§€' },
                { source: 10, target: 16, value: energy.online_sbs, label: 'SBS ì—ë„ˆì§€' },
                { source: 11, target: 16, value: energy.online_btv, label: 'Btv ì—ë„ˆì§€' },
                { source: 12, target: 16, value: energy.online_youtube, label: 'ìœ íŠœë¸Œ ì—ë„ˆì§€' },

                // Food & Drink -> Events
                { source: 5, target: 13, value: food.opening_general, label: 'ê°œë§‰ì‹ ì¼€ì´í„°ë§' },
                { source: 6, target: 13, value: food.opening_low_carbon, label: 'ê°œë§‰ì‹ ì €íƒ„ì†Œ' },
                { source: 5, target: 14, value: food.main_event_general, label: 'ë³¸í–‰ì‚¬ ìŠ¤íƒ­ì‹ì‚¬' },
                { source: 6, target: 14, value: food.main_event_low_carbon, label: 'ë³¸í–‰ì‚¬ ì €íƒ„ì†Œ' },
                { source: 6, target: 15, value: food.side_events_low_carbon, label: 'ë¶€ëŒ€í–‰ì‚¬ ì €íƒ„ì†Œ' },

                // Resources -> Events (Qualitative)
                { source: 7, target: 13, value: resources.opening, label: 'ìì›' },
                { source: 7, target: 14, value: resources.main_event, label: 'ìì›' },
                { source: 7, target: 15, value: resources.side_events, label: 'ìì›' },

                // --- PROCESS TO OUTBOUND ---
                // Events -> GHG Emissions
                { source: 13, target: 17, value: processTotals.opening, label: 'ê°œë§‰ì‹ ì´ ë°°ì¶œ' },
                { source: 14, target: 17, value: processTotals.main_event, label: 'ë³¸ í–‰ì‚¬ ì´ ë°°ì¶œ' },
                { source: 15, target: 17, value: processTotals.side_events, label: 'ë¶€ëŒ€í–‰ì‚¬ ì´ ë°°ì¶œ' },
                { source: 16, target: 17, value: processTotals.online, label: 'ì˜¨ë¼ì¸ ìƒì˜ ì´ ë°°ì¶œ' },

                // Events -> Circularity (Qualitative)
                { source: 13, target: 18, value: resources.opening, label: 'ìì›' },
                { source: 14, target: 18, value: resources.main_event, label: 'ìì›' },
                { source: 15, target: 18, value: resources.side_events, label: 'ìì›' },

                // --- OUTBOUND TO DETAILS ---
                // GHG -> Details
                { source: 17, target: 19, value: outboundDetails.transport, label: 'ì—¬í–‰/êµí†µ ë¶€ë¬¸' },
                { source: 17, target: 20, value: outboundDetails.energy, label: 'ì—ë„ˆì§€ ë¶€ë¬¸' },
                { source: 17, target: 21, value: outboundDetails.food, label: 'ì‹ìŒë£Œ ë¶€ë¬¸' },

                // Circularity -> Details
                { source: 18, target: 22, value: resources.total * 0.8, label: 'ì¬ì‚¬ìš©/ë Œíƒˆ' }, // Placeholder ratio
                { source: 18, target: 23, value: resources.total * 0.2, label: 'ì¬í™œìš©' } // Placeholder ratio
            ]
        };

        const nodeColors = [
            '#F87171', '#EF4444', '#DC2626', '#991B1B', // Reds for Travel/Logistics
            '#3B82F6',                                 // Blue for Offline Energy
            '#FBBF24', '#F59E0B',                      // Ambers for Food
            '#8B5CF6',                                 // Violet for Materials
            '#60A5FA', '#93C5FD', '#A5B4FC', '#C7D2FE', '#E0E7FF', // Shades of Blue for Online Energy
            '#1E293B', '#334155', '#475569', '#64748B', // Slates for Process
            '#4B5563', '#10B981',                      // Gray for GHG, Green for Circularity
            '#EF4444', '#3B82F6', '#F59E0B',            // Details match main categories
            '#34D399', '#6EE7B7'                       // Greens for Circularity details
        ];

        const linkColors = Array(data.links.length).fill('rgba(0, 0, 0, 0.2)');

        const sankeyData = {
            type: "sankey",
            orientation: "h",
            valueformat: ".1f",
            valuesuffix: " kgCOâ‚‚e",
            node: {
                pad: 15,
                thickness: 20,
                line: { color: "black", width: 0.5 },
                label: [
                    "âœˆï¸ í•­ê³µ/ìˆ™ë°• (í•´ì™¸) (9ëª…)",
                    "ğŸš— ìê°€ìš© (êµ­ë‚´) (24,063ëª…)",
                    "ğŸšŒ ëŒ€ì¤‘êµí†µ (êµ­ë‚´) (33,635ëª…)",
                    "ğŸšš ë¬¼ë¥˜/ì¥ë¹„ (14ê±´)",
                    "ğŸ’¡ ì˜¤í”„ë¼ì¸ í–‰ì‚¬ (ì—ë„ˆì§€)",
                    "ğŸ½ï¸ ì¼ë°˜ ì‹ë‹¨ (ì¼€ì´í„°ë§ 150ì¸ë¶„)",
                    "ğŸ¥— ì±„ì‹/ì €íƒ„ì†Œ ì‹ë‹¨ (2,634ê°œ)",
                    "â™»ï¸ ìì›/ë¬¼í’ˆ",
                    "ì˜¨ë¼ì¸ìƒì˜ê´€ (415,825ëª…)",
                    "í•™êµë‚´ êµìœ¡ (1,500ëª…)",
                    "SBS (1,000ëª…)",
                    "Btv (1,000ëª…)",
                    "ìœ íŠœë¸Œ (1,000ëª…)",
                    "ê°œë§‰ì‹",
                    "ë³¸ í–‰ì‚¬ (ì˜¤í”„ë¼ì¸ ìƒì˜)",
                    "ë¶€ëŒ€í–‰ì‚¬ ë° ì§€ë°©ìƒì˜",
                    "ì˜¨ë¼ì¸ ìƒì˜",
                    "ğŸ”¥ ì˜¨ì‹¤ê°€ìŠ¤ ë°°ì¶œ (195,155 kgCOâ‚‚e)",
                    "ğŸ”„ ìì› ìˆœí™˜",
                    "ì—¬í–‰/êµí†µ ë¶€ë¬¸ ë°°ì¶œ (181,921 kgCOâ‚‚e)",
                    "ì—ë„ˆì§€ ë¶€ë¬¸ ë°°ì¶œ (11,011 kgCOâ‚‚e)",
                    "ì‹ìŒë£Œ ë¶€ë¬¸ ë°°ì¶œ (2,223 kgCOâ‚‚e)",
                    "ì¬ì‚¬ìš©/ë Œíƒˆ ë¬¼í’ˆ",
                    "ì¬í™œìš© íê¸°ë¬¼"
                ],
                color: nodeColors,
                hovertemplate: '%{label}<extra></extra>'
            },
            link: {
                source: data.links.map(l => l.source),
                target: data.links.map(l => l.target),
                value: data.links.map(l => l.value),
                color: linkColors,
                hovertemplate: '%{source.label} â†’ %{target.label}<br><b>%{value:,.1f} kgCOâ‚‚e</b><extra></extra>'
            }
        };

        const layout = {
            title: {
                text: "<b>2025 ì„œìš¸êµ­ì œí™˜ê²½ì˜í™”ì œ ìì› íë¦„ ë° íƒ„ì†Œ ë°°ì¶œ ë¶„ì„</b>",
                font: {
                    family: "'Noto Sans KR', sans-serif",
                    size: 20,
                    color: '#1E293B'
                },
                x: 0.5,
                y: 0.98
            },
            font: {
                family: "'Noto Sans KR', sans-serif",
                size: 12
            },
            paper_bgcolor: 'white',
            plot_bgcolor: 'white',
            margin: { l: 20, r: 20, b: 50, t: 80 },
            autosize: true
        };

        const chartDiv = document.getElementById('sankey-chart');
        Plotly.newPlot(chartDiv, [sankeyData], layout, { responsive: true });

        // --- Dynamically generate insights ---
        const insightsContainer = document.getElementById('insights');
        const transportShare = (outboundDetails.transport / totalGHG * 100).toFixed(1);
        const onlineEnergyShare = (totalOnlineEnergy / outboundDetails.energy * 100).toFixed(1);

        insightsContainer.innerHTML = `
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500">
                <h4 class="font-bold text-xl mb-2 text-red-700">í•µì‹¬ ë°°ì¶œì›: ì°¸ê°€ì 'ì´ë™'</h4>
                <p class="text-gray-600">
                    ì „ì²´ ë°°ì¶œëŸ‰ì˜ <strong>${transportShare}%</strong>ê°€ ì°¸ê°€ìì™€ ë¬¼ë¥˜ì˜ 'ì´ë™'ì—ì„œ ë°œìƒí–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ 'ë¶€ëŒ€í–‰ì‚¬' ì°¸ì—¬ë¥¼ ìœ„í•œ êµ­ë‚´ ì°¸ê°€ìì˜ ì´ë™(144,651 kgCOâ‚‚e)ì´ ê°€ì¥ í° ë‹¨ì¼ ë°°ì¶œ íë¦„ì„ í˜•ì„±í•˜ë©°, ë¶„ì‚°ëœ í–‰ì‚¬ì˜ êµí†µ ì ‘ê·¼ì„± ê°œì„ ì´ ì‹œê¸‰í•œ ê³¼ì œì„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
                </p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500">
                <h4 class="font-bold text-xl mb-2 text-blue-700">ì˜¨ë¼ì¸ ìƒì˜ì˜ ì–‘ë©´ì„±</h4>
                <p class="text-gray-600">
                    ì˜¨ë¼ì¸ ìƒì˜ì€ ì „ì²´ ì—ë„ˆì§€ ë¶€ë¬¸ ë°°ì¶œëŸ‰ì˜ '78.2%'ë¥¼ ì°¨ì§€í•˜ë©° ìƒˆë¡œìš´ í™˜ê²½ ê³¼ì œë¡œ ë– ì˜¬ëìŠµë‹ˆë‹¤. ë°˜ë©´, ìˆ˜ë§ì€ ì ì¬ì  ê´€ê°ì˜ ì´ë™ì„ ì¤„ì´ëŠ” ê¸ì •ì  íš¨ê³¼ë„ ìˆì–´, í–¥í›„ ì¬ìƒì—ë„ˆì§€ ê¸°ë°˜ì˜ ì†¡ì¶œ íŒŒíŠ¸ë„ˆì‹­ì´ ì¤‘ìš”í•´ì¡ŒìŠµë‹ˆë‹¤.
                </p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
                <h4 class="font-bold text-xl mb-2 text-green-700">ìì› ìˆœí™˜ì˜ ê°€ì¹˜ ì¦ëª…</h4>
                <p class="text-gray-600">
                    ë¬¼í’ˆ êµ¬ë§¤ë¥¼ ìµœì†Œí™”í•˜ê³  ë Œíƒˆ/ì¬ì‚¬ìš©ì„ ê·¹ëŒ€í™”í•œ 'ìì› ìˆœí™˜' íë¦„ì€, ì˜¨ì‹¤ê°€ìŠ¤ ë°°ì¶œëŸ‰ìœ¼ë¡œ ì§ì ‘ ì§‘ê³„ë˜ì§€ëŠ” ì•Šì§€ë§Œ íê¸°ë¬¼ ê°ì¶•ì— ê²°ì •ì ì¸ ê¸°ì—¬ë¥¼ í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì§€ì†ê°€ëŠ¥í•œ í–‰ì‚¬ ìš´ì˜ì˜ í•µì‹¬ ì„±ê³µ ìš”ì†Œì…ë‹ˆë‹¤.
                </p>
            </div>
        `;

    </script>
</body>

</html>